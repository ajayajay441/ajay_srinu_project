<div class="shipments-page">
  <div
    fxLayout="row"
    fxLayoutGap="15px"
    class="mb-10"
    fxLayoutAlign="space-between center"
  >
    <div
      fxFlex="80"
      fxLayout="row wrap"
      fxLayoutGap="25px"
      fxLayoutAlign="start center"
    >
      <h1 class="mb-0">PO Status</h1>
      <div
        fxLayout="row"
        fxLayoutGap="15px"
        fxLayoutAlign="space-between center"
        class="shipments-page-selectbox"
      >
        <h3 class="mb-0">Type:</h3>
        <mat-form-field class="w-full">
          <!-- <mat-label>Status</mat-label> -->
          <mat-select>
            <mat-option> History </mat-option>
          </mat-select>
        </mat-form-field>
        <h3 class="mb-0">Type:</h3>
        <mat-form-field class="w-full">
          <!-- <mat-label>Status</mat-label> -->
          <mat-select>
            <mat-option> History </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div fxFlex="20" class="text-right">
      <button mat-raised-button color="primary" class="mat-elevation-z0">
        <mat-icon [svgIcon]="'download'" class="pr-2"></mat-icon>
        <a href="{{ Request_Quote_link }}" target="_blank">Request Quote</a>
      </button>
    </div>
  </div>
  <table
    mat-table
    [dataSource]="dataSource1"
    matSort
    class="w-full mat-elevation-z0"
    multiTemplateDataRows
  >
    <!-- Position Column -->
    <ng-container matColumnDef="PO No">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>PO No</th>
      <td mat-cell *matCellDef="let element">
        {{ element.po_number }}
      </td>
    </ng-container>

    <!-- for expansion panel every row expansion details -->
    <ng-container matColumnDef="expandedDetail">
      <td
        mat-cell
        *matCellDef="let element"
        [attr.colspan]="displayedColumns1.length"
      >
        <div
          class="element-detail"
          [@detailExpand]="
            element == expandedElement ? 'expanded' : 'collapsed'
          "
        >
          <!-- Accordian-->

          <!-- <div class="mb-10">
            <mat-card class="mat-elevation-z0">
              <div class="card-body"> -->
          <!-- PO table -->

          <table
            mat-table
            [dataSource]="dataSource"
            class="w-full mat-elevation-z0"
          >
            <!--- Note that these columns can be defined in any order.
                      The actual rendered columns are set as a property on the row definition" -->

            <!-- Position Column -->
            <!-- <ng-container matColumnDef="position">
                <th mat-header-cell *matHeaderCellDef>No.</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.position }}
                </td>
              </ng-container> -->

            <!-- Name Column -->
            <ng-container matColumnDef="sku">
              <th mat-header-cell *matHeaderCellDef>SKU</th>
              <td mat-cell *matCellDef="let element">
                <span class="w-20">{{ element.sku }} </span>
                <!-- <mat-form-field *ngIf="element.edit">
                  <input type="text" matInput [(ngModel)]="element.sku" />
                </mat-form-field> -->
              </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="description">
              <th mat-header-cell *matHeaderCellDef>Description</th>
              <td mat-cell *matCellDef="let element">
                <span>{{ element.description }} </span>
                <!-- <mat-form-field *ngIf="element.edit" class="w-20">
                  <input
                    type="text"
                    matInput
                    [(ngModel)]="element.description"
                  />
                </mat-form-field> -->
              </td>
            </ng-container>
            <ng-container matColumnDef="shipmentno">
              <th mat-header-cell *matHeaderCellDef>Shipment N°</th>
              <td mat-cell *matCellDef="let element">
                <span class="w-20">{{ element.shipmentno }} </span>
                <!-- <mat-form-field *ngIf="element.edit">
                  <input
                    type="text"
                    matInput
                    [(ngModel)]="element.shipmentno"
                  />
                </mat-form-field> -->
              </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="delivery_date">
              <th mat-header-cell *matHeaderCellDef>Delivery Date</th>
              <td mat-cell *matCellDef="let element">
                <span class="w-20">{{ element.delivery_date }} </span>
                <!-- <mat-form-field *ngIf="element.edit">
                  <input
                    type="text"
                    matInput
                    [(ngModel)]="element.delivery_date"
                  />
                </mat-form-field> -->
              </td>
            </ng-container>
            <ng-container matColumnDef="Ordered">
              <th mat-header-cell *matHeaderCellDef>Ordered</th>
              <td mat-cell *matCellDef="let element">
                <span *ngIf="!element.edit">{{ element.Ordered }} </span>
                <mat-form-field
                  *ngIf="element.edit"
                  class="w-20"
                  appearance="outline"
                >
                  <input type="text" matInput [(ngModel)]="element.Ordered" />
                </mat-form-field>
              </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="booked">
              <th mat-header-cell *matHeaderCellDef>Booked</th>
              <td mat-cell *matCellDef="let element">
                <span *ngIf="!element.edit">{{ element.booked }} </span>
                <mat-form-field
                  *ngIf="element.edit"
                  class="w-20"
                  appearance="outline"
                >
                  <input type="text" matInput [(ngModel)]="element.booked" />
                </mat-form-field>
              </td>
            </ng-container>
            <ng-container matColumnDef="closed">
              <th mat-header-cell *matHeaderCellDef>Closed</th>
              <td mat-cell *matCellDef="let element">
                <span *ngIf="!element.edit">{{ element.closed }} </span>
                <mat-form-field
                  *ngIf="element.edit"
                  class="w-20"
                  appearance="outline"
                >
                  <input type="text" matInput [(ngModel)]="element.closed" />
                </mat-form-field>
              </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="balance">
              <th mat-header-cell *matHeaderCellDef>Balance</th>
              <td mat-cell *matCellDef="let element">
                <span *ngIf="!element.edit">{{ element.balance }} </span>
                <mat-form-field
                  *ngIf="element.edit"
                  class="w-20"
                  appearance="outline"
                >
                  <input type="text" matInput [(ngModel)]="element.balance" />
                </mat-form-field>
              </td>
            </ng-container>

            <!-- Button Column -->
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let element">
                <button
                  mat-stroked-button
                  color="primary"
                  *ngIf="!element.edit"
                  (click)="element.edit = !element.edit"
                >
                  Edit
                </button>
                <button
                  mat-stroked-button
                  color="primary"
                  *ngIf="element.edit"
                  (click)="
                    element.edit = !element.edit;
                    saveData(element);
                    goTo('/ebooking', 'element')
                  "
                >
                  Done
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table>
          <!-- </div>
            </mat-card>
          </div> -->
        </div>
      </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="Origin">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Origin</th>
      <td mat-cell *matCellDef="let element">{{ element.origin }}</td>
    </ng-container>

    <!-- Weight Column -->
    <ng-container matColumnDef="Destination">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Destination</th>
      <td mat-cell *matCellDef="let element">{{ element.destination }}</td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="Supplier">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Supplier</th>
      <td mat-cell *matCellDef="let element">
        {{ element.supplier }}
      </td>
    </ng-container>
    <ng-container matColumnDef="Number of SKU’s">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Number of SKU’s</th>
      <td mat-cell *matCellDef="let element">
        {{ element.no_of_sku }}
      </td>
    </ng-container>
    <ng-container matColumnDef="Order Pcs">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Order Pcs</th>
      <td mat-cell *matCellDef="let element">
        {{ element.orderpieces }}
      </td>
    </ng-container>
    <ng-container matColumnDef="In Transit">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>In Transit</th>
      <td mat-cell *matCellDef="let element">
        {{ element.intransit }}
      </td>
    </ng-container>
    <ng-container matColumnDef="Closed">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Closed</th>
      <td mat-cell *matCellDef="let element">
        {{ element.closed }}
      </td>
    </ng-container>

    <ng-container matColumnDef="details">
      <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
      <td mat-cell *matCellDef="let element">
        <a
          class="underline cursor-pointer mat-primary"
          (click)="
            expandedElement = expandedElement === element ? null : element;
            getpurchaseorderdetail(element.po_number)
          "
        >
          See Details
        </a>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>

    <tr
      mat-row
      *matRowDef="let element; columns: displayedColumns1"
      class="element-row"
      [class.expanded-row]="element.isExpanded"
    ></tr>

    <tr
      mat-row
      *matRowDef="let row; columns: ['expandedDetail']"
      class="detail-row"
    ></tr>
  </table>
</div>
